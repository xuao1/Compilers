### 分析与设计

题目要求编写词法分析程序，能对输入的一行字符流进行词法分析，依次识别出其中的关系运算符和其他符号，并输出对应的记号序列。

本次代码参考了老师上课讲授的状态转换图的思想，部分核心代码如下：

```c++
switch (state) {
		case 0:
			if (line[i] == '<' || line[i] == '=' || line[i] == '>') {
				if (num_nop) {
					Print0(num_nop);
					num_nop = 0;
				}
				if (line[i] == '<') state = 1;
				else if (line[i] == '=') state = 5;
				else if (line[i] == '>') state = 6;
			}
			else num_nop++;
			break;
		...
		
		case 7:
			Print(state); state = 0; i--;
			break;
		}
```

此外，根据题目描述，一行的结束是换行符，经查阅资料可知：

> Unix 系统里，每行结尾只有“<换行>”，即"\n"；Windows 系统里面，每行结尾是“<回车><换行>”，即“\r\n”

### 遇到的问题及解决方案

初始我的代码没有考虑到结尾是运算符的情况，所以对于类似 ">>" 的输入，最后一个字符会被略去。核心原因在于我的输出是在读完一整个运算符、已经读入了下一个字符时，所以最后一个运算符不会被输出。

之后，我增加了特判，在读到换行符时，判断当前状态是否为待输出状态，如果是，表明出现了上述情况，那就调用输出函数。